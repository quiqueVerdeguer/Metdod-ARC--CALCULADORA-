<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora ARC | Plan Nutrici√≥n D√©ficit</title>
  <meta name="description" content="Calculadora ARC para estimar TMB, TDEE y calor√≠as objetivo en d√©ficit (‚Äì300 a ‚Äì400 kcal) para p√©rdida de grasa, con pautas generales y recomendaciones." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{ --bg:#0b1020; --card:#121a2b; --muted:#8ea4c5; --text:#e7edf7; --brand:#0ea5e9; --brand-2:#38bdf8; --ring:0 0 0 3px rgba(56,189,248,.35) }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial,'Noto Sans';background:linear-gradient(180deg,#091227 0%, #0b1020 40%, #0b1020 100%);color:var(--text);line-height:1.6}
    .container{max-width:1000px;margin:0 auto;padding:24px}
    header.hero{position:relative;padding:64px 24px 48px;text-align:center;background:radial-gradient(1200px 600px at 50% -200px, rgba(56,189,248,.18), transparent 60%);border-bottom:1px solid rgba(255,255,255,.06)}
    .title{font-size:clamp(28px,4vw,44px);margin:14px 0 6px}
    .subtitle{color:var(--muted);margin:0 auto 18px;max-width:780px}
    section{padding:32px 0}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:22px;box-shadow:0 10px 30px rgba(0,0,0,.25);margin-bottom:26px}
    h2{margin:0 0 14px;font-size:clamp(22px,3.2vw,30px)}
    ul{margin:0 0 8px 18px}
    .calc-grid{display:grid;gap:12px}
    .row{display:grid;gap:12px}
    @media(min-width:640px){ .row{grid-template-columns:repeat(2,minmax(0,1fr))} }
    label{font-weight:600}
    input,select,button{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.1);background:#0c1528;color:var(--text);outline:none}
    input:focus,select:focus{box-shadow:var(--ring);border-color:var(--brand-2)}
    button.primary{background:linear-gradient(90deg,var(--brand),var(--brand-2));color:#05121a;font-weight:800;border:0;cursor:pointer}
    .result{display:none;margin-top:14px;padding:14px;border-radius:14px;background:#0c1528;border:1px solid rgba(255,255,255,.06)}
    .result pre{white-space:pre-wrap;margin:0}
    .badge{display:inline-block;font-size:.8rem;background:#0e2b42;color:#96e9ff;border:1px solid rgba(56,189,248,.35);padding:6px 10px;border-radius:999px}
    .muted{color:var(--muted)}
    footer{padding:26px 24px;color:var(--muted);text-align:center;border-top:1px solid rgba(255,255,255,.06)}
  </style>
</head>
<body>
  <header class="hero">
    <h1 class="title">Calculadora ARC ‚Äî P√©rdida de Grasa (‚àí4 kg en 12 semanas)</h1>
    <p class="subtitle">Herramienta con <span class="badge">Mifflin‚ÄìSt Jeor</span> y pautas generales de uso. El d√©ficit se aplica sobre el <strong>TDEE</strong>, no sobre el TMB.</p>
  </header>

  <main class="container">
    <!-- PARTE 1 ¬∑ CALCULADORA -->
    <section class="card" id="calculadora">
      <h2>üßÆ Calculadora TMB/TDEE (d√©ficit aplicado a TDEE)</h2>
      <div class="calc-grid">
        <div class="row">
          <div>
            <label for="peso">Peso (kg)</label>
            <input id="peso" type="number" inputmode="decimal" placeholder="70" min="30" max="250" step="0.1" required>
          </div>
          <div>
            <label for="altura">Altura (cm)</label>
            <input id="altura" type="number" inputmode="decimal" placeholder="175" min="120" max="230" step="0.1" required>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="edad">Edad (a√±os)</label>
            <input id="edad" type="number" inputmode="numeric" placeholder="30" min="14" max="90" step="1" required>
          </div>
          <div>
            <label for="sexo">Sexo</label>
            <select id="sexo">
              <option value="hombre">Hombre</option>
              <option value="mujer">Mujer</option>
            </select>
          </div>
        </div>
        <div>
          <label for="nivel">Nivel de actividad</label>
          <select id="nivel">
            <option value="sedentario">Sedentario (poco o ning√∫n ejercicio)</option>
            <option value="ligero" selected>Ligero (1‚Äì3 d√≠as/semana)</option>
            <option value="moderado">Moderado (3‚Äì5 d√≠as/semana)</option>
            <option value="intenso">Intenso (6‚Äì7 d√≠as/semana)</option>
            <option value="muy_intenso">Muy intenso (trabajo f√≠sico/2 sesiones d√≠a)</option>
          </select>
        </div>
        <div class="row">
          <button class="primary" id="btnCalc">Calcular</button>
          <button id="btnCopy" title="Copiar resultados">Copiar resultados</button>
        </div>
        <p class="muted">*El objetivo cal√≥rico se calcula como <strong>TDEE ‚àí 300 a ‚àí 400 kcal</strong> para p√©rdida de grasa sostenible.</p>
        <div id="resultado" class="result" aria-live="polite"></div>
      </div>
    </section>

    <!-- PARTE 2 ¬∑ PAUTAS GENERALES -->
    <section class="card" id="pautas">
      <h2>üìå Pautas generales y conceptos clave</h2>
      <ul>
        <li><strong>TMB (Tasa Metab√≥lica Basal):</strong> calor√≠as m√≠nimas que gasta tu cuerpo en reposo (no aplicar d√©ficit aqu√≠).</li>
        <li><strong>TDEE (Gasto Energ√©tico Total Diario):</strong> TMB √ó factor de actividad. <u>El d√©ficit se aplica al TDEE</u>.</li>
        <li><strong>D√©ficit recomendado:</strong> restar <strong>300‚Äì400 kcal</strong> al TDEE para un ritmo ~0,25‚Äì0,40 kg/semana.</li>
        <li><strong>Recomendaci√≥n de uso:</strong> marca <strong>Nivel de actividad = Ligero (1‚Äì3 d√≠as/semana)</strong> salvo que seas deportista profesional. Los niveles superiores tienden a sobreestimar el gasto para la mayor√≠a.</li>
        <li><strong>Macros orientativos (por kg):</strong> Prote√≠na 2,0‚Äì2,4 g/kg ¬∑ Grasas 0,6‚Äì0,8 g/kg ¬∑ Carbohidratos = resto.</li>
        <li>Hidrataci√≥n 2‚Äì3 L/d√≠a ¬∑ Sue√±o 7‚Äì9 h ¬∑ Ajusta calor√≠as y macros cada 2‚Äì3 semanas seg√∫n evoluci√≥n.</li>
      </ul>
    </section>
  </main>

  <footer>
    <p>¬© 2025 ARC Coaching ‚Äî Herramienta orientativa. No sustituye asesoramiento profesional.</p>
  </footer>

  <script>
    const factores = { sedentario: 1.2, ligero: 1.375, moderado: 1.55, intenso: 1.725, muy_intenso: 1.9 };
    const clamp=(n,min,max)=> Math.max(min, Math.min(max, n));
    const mifflin=(p,a,e,s)=> s==='hombre' ? 10*p + 6.25*a - 5*e + 5 : 10*p + 6.25*a - 5*e - 161;
    const fmt=(n,d=0)=> Number(n).toLocaleString('es-ES',{maximumFractionDigits:d,minimumFractionDigits:d});

    async function copiar(texto){
      try{ await navigator.clipboard.writeText(texto); alert('Copiado'); }
      catch(e){ alert('Selecciona el texto y pulsa Ctrl/Cmd+C'); }
    }

    function calcular(){
      const peso = clamp(parseFloat(document.getElementById('peso').value), 30, 250);
      const altura = clamp(parseFloat(document.getElementById('altura').value), 120, 230);
      const edad = clamp(parseInt(document.getElementById('edad').value,10), 14, 90);
      const sexo = document.getElementById('sexo').value;
      const nivel = document.getElementById('nivel').value;
      const box = document.getElementById('resultado');
      box.style.display='none'; box.textContent='';

      if([peso,altura,edad].some(v=>Number.isNaN(v))){
        box.style.display='block';
        box.innerHTML = '<span style="color:#fda4af">Por favor, completa todos los campos con valores v√°lidos.</span>';
        return;
      }

      const tmb = mifflin(peso, altura, edad, sexo);
      const tdee = tmb * (factores[nivel] ?? 1.375);

      const kcalMin = tdee - 400;
      const kcalMax = tdee - 300;
      const kcalMed = (kcalMin + kcalMax)/2;

      const pMin = peso*2.0, pMax = peso*2.4;
      const gMin = peso*0.6, gMax = peso*0.8;
      const kcalProte = ((pMin+pMax)/2)*4;
      const kcalGrasa = ((gMin+gMax)/2)*9;
      const cGr = Math.max(0, (kcalMed - kcalProte - kcalGrasa)/4);

      const out = `TMB: ${fmt(tmb,0)} kcal/d√≠a\nTDEE: ${fmt(tdee,0)} kcal/d√≠a\nCalor√≠as objetivo (d√©ficit): ${fmt(kcalMin,0)}‚Äì${fmt(kcalMax,0)} kcal/d√≠a\n\nMacros (rangos)\n‚Ä¢ Prote√≠nas: ${fmt(pMin,0)}‚Äì${fmt(pMax,0)} g/d√≠a\n‚Ä¢ Grasas: ${fmt(gMin,0)}‚Äì${fmt(gMax,0)} g/d√≠a\n‚Ä¢ Carbohidratos (resto con objetivo medio): ${fmt(cGr,0)} g/d√≠a`;

      box.innerHTML = '<pre>'+out+'</pre>';
      box.style.display='block';
    }

    document.getElementById('btnCalc')?.addEventListener('click', calcular);
    document.getElementById('btnCopy')?.addEventListener('click', ()=>{
      const res=document.getElementById('resultado');
      if(!res || !res.textContent.trim()) return alert('Calcula primero para copiar los resultados');
      copiar(res.innerText.trim());
    });
  </script>
</body>
</html>
